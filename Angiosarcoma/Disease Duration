install.packages("readxl")
library(readxl)
AS_cohort <- read_excel("AS_cohort.xlsx")

# Calculate duration of disease in months
duration <- ifelse(is.na(patients$Date_of_death), 
                    round((Sys.Date() - patients$Date_of_onset) / 30.4375),  # Convert days to months
                    round((patients$Date_of_death - patients$Date_of_onset) / 30.4375))

# Calculate summary statistics
mean_duration_months <- mean(duration, na.rm = TRUE)
median_duration_months <- median(duration, na.rm = TRUE)
range_duration_months <- range(duration, na.rm = TRUE)
sd_duration_months <- sd(duration, na.rm = TRUE)

print(mean_duration_months)
print(median_duration_months)
print(range_duration_months)
print(sd_duration_months)

library(ggplot2)

# Create a histogram of duration of disease
ggplot(patients, aes(x = duration)) +
  geom_histogram(binwidth = 5, fill = "blue", color = "black") +
  labs(title = "Histogram of Duration of Disease",
       x = "Duration of Disease (months)",
       y = "Frequency")

# Create a barplot of duration of disease
ggplot(patients, aes(x = duration)) +
  geom_bar(fill = "blue", color = "black") +  # Use geom_bar() for a bar plot
  labs(title = "Bar Plot of Duration of Disease",
       x = "Duration of Disease (months)",
       y = "Frequency")
